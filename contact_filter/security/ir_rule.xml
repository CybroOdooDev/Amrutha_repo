<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="rule_contact_access_simplified" model="ir.rule">
            <field name="name">Contact Access: Salesperson or Admin</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="domain_force">[
                '|', 
                ('user_id', '=', user.id),
                ('id', '=', user.partner_id.id)
            ]</field>            
            <!-- <field name="domain_force">[
                '|', 
                '|',
                ('user_id', '=', user.id),
                ('user_id', '=', False),
                ('id', '=', user.partner_id.id)
            ]</field> -->
            <!-- <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman'))]"/> -->
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>
        
        <!-- Admin rule with higher priority -->
        <record id="rule_contact_access_admin" model="ir.rule">
            <field name="name">Administrators see all contacts</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[
                (4, ref('base.group_system')),
                (4, ref('sales_team.group_sale_manager'))
            ]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <!-- Ensure Sales Managers can edit the salesperson field -->
        <!-- <record id="access_salesperson_field_manager" model="ir.model.access">
            <field name="name">Sales Admin: Edit Salesperson</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="group_id" ref="sales_team.group_sale_manager"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="1"/>
        </record>         -->
    </data>
</odoo>